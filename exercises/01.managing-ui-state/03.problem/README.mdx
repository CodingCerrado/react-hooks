# Derived State for Validation

All state can be classified into two buckets:

- **Managed State:** State that you need to explicitly manage (via
  `React.useState` for example)
- **Derived State:** State that you can calculate based on other state

Not all state needs to be stored, some of it can be derived. For example, let's
say that you have a basket of stuffed animals and your state is:

```tsx
const koalaCount = 4
const owlCount = 6
```

As stuffed animals are added and removed, you need to update those values. But
let's say you want to display a total count of all stuffed animals in the
basket. Do you need to manage that state separately? We definitely could, but we
don't need to (and we shouldn't). You can derive that value from the managed
state that you already have. Add the `koalaCount` and the `owlCount` together
and you get the total.

We have lots of state like this in applications and deriving state can help us
avoid state synchronization bugs. For more on this, read
[Don't Sync State. Derive It!](https://kentcdodds.com/blog/dont-sync-state-derive-it).

For this extra credit, we're going to add some validation. We want to validate
the user's input and display an error message if they get something wrong. Here
are the rules:

1. If username is not all lower-case, display: `'Username must be lower case'`
2. If username is less than 3 characters, display:
   `'Username must be at least 3 characters long'`
3. If username is more than 10 characters, display:
   `'Username must be no longer than 10 characters'`

And finally, if the user clicks "submit" we don't want to call
`onSubmitUsername` unless the input is valid.

ðŸ’° There are plenty of ways to do this, but as a hint, here are some of the
variables I make in my solution:

- `usernameIsLowerCase`: derived from the `username`
- `usernameIsLongEnough`: derived from the `username`
- `usernameIsShortEnough`: derived from the `username`
- `formIsValid`: derived from `usernameIsLowerCase`, `usernameIsLongEnough`, and
  `usernameIsShortEnough`
- `errorMessage`: derived from `usernameIsLowerCase`, `usernameIsLongEnough`,
  and `usernameIsShortEnough`

So some derived state can be derived from other state!

And then in the `handleSubmit` I check the `formIsValid` value before calling
`onSubmitUsername`.

Display the error message in a `div` with a `id="error-message"` right before
the submit button. We have some `css` on the page so the `error-message` class
will make it `red`. And make sure to not render the `div` if the form is valid.

